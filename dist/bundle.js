(()=>{const e=document.querySelector(".city-name"),t=document.querySelector(".current-date"),n=document.querySelector(".current-time"),r=document.querySelector(".temp"),i=document.querySelector(".weather-type"),a=document.querySelector(".feels-like"),c=document.querySelector(".humidity"),o=document.querySelector(".wind"),s=(document.querySelector(".main"),document.querySelector(".weather-image")),u=document.querySelector(".temp-change"),m=document.querySelector("form"),d=document.querySelector("[data-search-input]");async function l(u,m){try{const l=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${m}&units=${u}&appid=7470ed2b0f9dc40d12a6d5af68a85501`,{mode:"cors"}),y=await l.json();console.log(y),e.innerText=`${y.name}, ${y.sys.country}`.toUpperCase();const p=function(e){let t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset()+1e3*e.timezone;return new Date(n)}(y),h=p.toLocaleDateString(),T=p.toLocaleTimeString();if(t.innerText=`${h}, `,n.innerText=`${T}`,weatherType=y.weather[0].description,i.innerText=(d=weatherType).charAt(0).toUpperCase()+d.slice(1),console.log(u),"metric"===u){r.innerText=`${Math.round(y.main.temp)}°C`,a.innerText=`Feels like: ${Math.round(y.main.feels_like)}°C`;const e=Math.round(3.6*y.wind.speed);o.innerText=`Wind: ${e} km/h`}else"imperial"===u&&(r.innerText=`${Math.round(y.main.temp)}°F`,a.innerText=`Feels like: ${Math.round(y.main.feels_like)}°F`,o.innerText=`Wind: ${Math.round(y.wind.speed)} m/h`);c.innerText=`Humidity: ${y.main.humidity}%`,function(e){switch(e.weather[0].main){case"Clear":s.src="/dist/img/clear.svg";break;case"Clouds":s.src="/dist/img/cloudy.svg";break;case"Rain":case"Drizzle":case"Mist":s.src="/dist/img/rain.svg";break;case"Thunderstorm":s.src="/dist/img/thunder.svg";break;case"Snow":s.src="/dist/img/snow.svg";break;default:s.src=""}}(y)}catch(e){console.log(e)}var d}document.querySelector(".search-button"),m.addEventListener("submit",(e=>{e.preventDefault();const t=d.value;d.value="","Display in °C"===u.innerText?l("imperial",t):"Display in °F"===u.innerText&&l("metric",t)})),u.addEventListener("click",(t=>{"Display in °F"===u.innerText?(u.innerText="Display in °C",l("imperial",e.innerText)):"Display in °C"===u.innerText&&(u.innerText="Display in °F",l("metric",e.innerText))})),l("metric","New York")})();